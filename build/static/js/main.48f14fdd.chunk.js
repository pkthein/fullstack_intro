(this.webpackJsonpnotesapp=this.webpackJsonpnotesapp||[]).push([[0],{38:function(e,t,n){e.exports=n(69)},43:function(e,t,n){},44:function(e,t,n){},69:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(16),c=n.n(o),l=(n(43),n(44),n(12)),u=n(4),i=n(6),s=Object(i.b)((function(e){return{isLoggedIn:e.userReducer.isLoggedIn}}))((function(e){var t=e.isLoggedIn;return r.a.createElement("div",null,r.a.createElement("h2",null,"Home"),r.a.createElement("h3",null,"Welcome to Note-Taking App"),!t&&r.a.createElement("div",null,"Please either 'Log In' or 'Sign Up' to continue...",r.a.createElement("br",null),r.a.createElement(u.b,{to:"/login"},"Login"),r.a.createElement("br",null),r.a.createElement(u.b,{to:"/signup"},"Sign Up")),t&&r.a.createElement("div",null,"Enjoy our wonky WebApp..."))})),d=n(15),m=n(18),p=n.n(m),g=n(11),h=n.n(g),E=function(){return function(e,t){h.a.get("/api/notes/all",{withCredentials:!0}).then((function(t){e({type:"NOTES_SET_NOTES",notes:t.data.response.notes}),e(f(""))})).catch((function(e){console.log(e)}))}},f=function(e){return{type:"NOTES_SET_NEW_NOTE",newNote:e}},v=function(){return function(e,t){var n=t().notesReducer.newNote;h.a.post("/api/notes/new",{note:{content:n}},{withCredentials:!0}).then((function(t){return e(E())})).catch((function(e){console.log(e)}))}},b=function(e){return function(t,n){h.a.post("/api/notes/edit",e,{withCredentials:!0}).then((function(e){return t(E())})).catch((function(e){console.log(e)}))}},w=function(e){return{type:"SET_EMAIL",email:e}},O=function(e){return{type:"SET_IS_LOGGED_IN",isLoggedIn:e}},y=function(e){return{type:"SET_USERNAME",username:e}},N=function(e){return function(t,n){var a=e.user.password;h.a.post("/api/auth/user/login",e,{withCredentials:!0}).then((function(e){document.cookie="email=".concat(e.data.response.user.email),document.cookie="password=".concat(a),t(y(e.data.response.user.username)),t(O(!0))})).then((function(){return t(E())})).catch((function(e){console.log(e)}))}},S=Object(i.b)((function(e){return{email:e.userReducer.email,isLoggedIn:e.userReducer.isLoggedIn}}))((function(e){var t=e.dispatch,n=e.email,a=e.isLoggedIn,o=r.a.useState(""),c=Object(d.a)(o,2),u=c[0],i=c[1],s=function(){n.includes("@")&&n.includes(".")?""===u?alert("Invalid email and password pairing!"):t(N({user:{email:n,password:p()(u)}})):alert("Not a valid email!")};return a?r.a.createElement(l.a,{to:"/dashboard"}):r.a.createElement("div",null,r.a.createElement("h2",null,"Log In"),r.a.createElement("div",null,r.a.createElement("div",{className:"App-header"},r.a.createElement("input",{value:n,placeholder:"EMAIL",type:"text",onChange:function(e){var n;(n=e.target.value).length<20&&t(w(n))}}),r.a.createElement("input",{value:u,placeholder:"PASSWORD",type:"password",onChange:function(e){return i(e.target.value)},onKeyPress:function(e){return"Enter"===e.key?s():""}})),r.a.createElement("div",null,r.a.createElement("button",{className:"button",onClick:function(){return s()}},"Submit"))))})),I=Object(i.b)((function(e){return{email:e.userReducer.email,username:e.userReducer.username,notes:e.notesReducer.notes,newNote:e.notesReducer.newNote,isLoggedIn:e.userReducer.isLoggedIn}}))((function(e){var t=e.dispatch,n=e.email,a=e.username,o=e.notes,c=e.isLoggedIn,u=e.newNote,i=function(){t((function(e,t){h.a.post("api/auth/user/logout",{},{withCredentials:!0}).then((function(t){e(w("")),e(y("")),e(O(!1))})).catch((function(e){console.log(e)}))}))},s=function(e){var n;t((n=e._id,function(e,t){h.a.get("/api/notes/note/".concat(n),{withCredentials:!0}).then((function(e){console.log("This note has been viewed ".concat(e.data.response.views," times"))})).catch((function(e){console.log(e)}))}))};return c?r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("h2",null,"Dashboard"),r.a.createElement("div",null,"Welcome ",a||n),r.a.createElement("button",{className:"button",onClick:function(){return i()}},"Log Out")),r.a.createElement("div",null,r.a.createElement("h2",null,"Notes"),r.a.createElement("div",null,r.a.createElement("div",null,"Create notes in the input below."),r.a.createElement("div",null,"To edit, please click on the card below."),r.a.createElement("div",null,"Cursor over & off count as reading and will increase the view count. Console log will tell about the views.")),r.a.createElement("div",null,r.a.createElement("input",{value:u,placeholder:"New Note",type:"note",onChange:function(e){return t(f(e.target.value))},onKeyPress:function(e){return"Enter"===e.key?t(v()):""}}),r.a.createElement("button",{className:"button",onClick:function(){return t(v())}},"Save"),r.a.createElement("hr",null)),o.map((function(e,n){return r.a.createElement("div",{className:"Note-card",key:n,onClick:function(){return function(e){var n=window.prompt("How would you like to change the note?","");if(null===n);else if(""===n){window.confirm("Would you really like to delete the post content?")&&t(b({note:{_id:e._id,content:"deleted..."}}))}else t(b({note:{_id:e._id,content:n}}))}(o[n])},onMouseLeave:function(){return s(o[n])}},r.a.createElement("p",null,e.content),r.a.createElement("dir",{className:"Note-signature"},"By ",e.author.username))})))):r.a.createElement(l.a,{to:"/"})})),j=Object(i.b)((function(e){return{email:e.userReducer.email,username:e.userReducer.username,isLoggedIn:e.userReducer.isLoggedIn}}))((function(e){var t=e.dispatch,n=e.email,a=e.username,o=e.isLoggedIn,c=r.a.useState(""),u=Object(d.a)(c,2),i=u[0],s=u[1],m=r.a.useState(""),g=Object(d.a)(m,2),E=g[0],f=g[1],v=function(){var e;n.includes("@")&&n.includes(".")?""===a?alert("Username cannot be empty!"):i!==E?alert("Passwords do not match!"):i.length<5?alert("Password must be longer than 5 characters!"):t((e={user:{username:a,email:n,password:p()(i)}},function(t,n){h.a.post("/api/auth/user/signup",e,{withCredentials:!0}).then((function(e){console.log(e),t(O(!0))})).catch((function(e){console.log(e)}))})):alert("Not a valid email!")};return o?r.a.createElement(l.a,{to:"/dashboard"}):r.a.createElement("div",null,r.a.createElement("h2",null,"Sign Up"),r.a.createElement("div",null,r.a.createElement("div",{className:"App-header"},r.a.createElement("input",{value:n,placeholder:"EMAIL",type:"text",onChange:function(e){var n;(n=e.target.value).length<20&&t(w(n))}}),r.a.createElement("input",{value:a,placeholder:"USERNAME",type:"text",onChange:function(e){var n;(n=e.target.value).length<20&&t(y(n))}}),r.a.createElement("input",{value:i,placeholder:"PASSWORD",type:"password",onChange:function(e){var t;(t=e.target.value).length<20&&s(t)}}),r.a.createElement("input",{value:E,placeholder:"PASSWORD",type:"password",onChange:function(e){var t;(t=e.target.value).length<20&&f(t)},onKeyPress:function(e){return"Enter"===e.key?v():""}})),r.a.createElement("div",null,r.a.createElement("button",{className:"button",onClick:function(){return v()}},"Submit"))))})),L=Object(i.b)((function(e){return{isLoggedIn:e.userReducer.isLoggedIn}}))((function(e){var t=e.dispatch,n=e.isLoggedIn;return r.a.useEffect((function(){var e=null,n=null;document.cookie.split(";").forEach((function(t){t.includes("email=")?e=t.split("=")[1]:t.includes("password=")&&(n=t.split("=")[1])})),e&&t(N({user:{email:e,password:n}}))}),[]),r.a.createElement("div",{className:"App"},n&&r.a.createElement(l.a,{to:"/dashboard"}),r.a.createElement("div",{className:"nav-bar"},r.a.createElement("div",null,r.a.createElement(u.b,{to:"/"},"Home")),!n&&r.a.createElement("div",null,r.a.createElement(u.b,{to:"/login"},"Log In"),r.a.createElement(u.b,{to:"/signup"},"Sign Up")),n&&r.a.createElement("div",null,r.a.createElement(u.b,{to:"/dashboard"},"Dashboard"))),r.a.createElement(l.d,null,r.a.createElement(l.b,{path:"/signup",component:j}),r.a.createElement(l.b,{path:"/dashboard",component:I}),r.a.createElement(l.b,{path:"/login",component:S}),r.a.createElement(l.b,{path:"/",component:s})))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var T=n(13),k=n(37),P=n(19);function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(n,!0).forEach((function(t){Object(P.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var R={notes:[],newNote:""},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NOTES_SET_NEW_NOTE":return C({},e,{newNote:t.newNote});case"NOTES_SET_NOTES":return C({},e,{notes:t.notes});default:return e}};function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(n,!0).forEach((function(t){Object(P.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var W={email:"",username:"",isLoggedIn:!1},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_IS_LOGGED_IN":return t.isLoggedIn||(document.cookie="auth=; expires=Thu, 01 Jan 1970 00:00:01 GMT;",document.cookie="email=; expires=Thu, 01 Jan 1970 00:00:01 GMT;",document.cookie="password=; expires=Thu, 01 Jan 1970 00:00:01 GMT;"),M({},e,{isLoggedIn:t.isLoggedIn});case"SET_EMAIL":return M({},e,{email:t.email});case"SET_USERNAME":return M({},e,{username:t.username});default:return e}},x=Object(T.c)({notesReducer:A,userReducer:U}),G=Object(T.d)(x,Object(T.a)(k.a));c.a.render(r.a.createElement(i.a,{store:G},r.a.createElement(u.a,null,r.a.createElement(L,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[38,1,2]]]);
//# sourceMappingURL=main.48f14fdd.chunk.js.map